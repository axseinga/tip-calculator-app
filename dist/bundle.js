!function(){"use strict";var e,t,n={},c={};function r(e){var t=c[e];if(void 0!==t)return t.exports;var o=c[e]={id:e,exports:{}};return n[e](o,o.exports,r),o.exports}r.m=n,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return e+".bundle.js"},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="tip-calculator-app-main:",r.l=function(n,c,o,u){if(e[n])e[n].push(c);else{var l,i;if(void 0!==o)for(var a=document.getElementsByTagName("script"),p=0;p<a.length;p++){var s=a[p];if(s.getAttribute("src")==n||s.getAttribute("data-webpack")==t+o){l=s;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+o),l.src=n),e[n]=[c];var d=function(t,c){l.onerror=l.onload=null,clearTimeout(f);var r=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(c)})),t)return t(c)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),i&&document.head.appendChild(l)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="",function(){r.b=document.baseURI||self.location.href;var e={179:0};r.f.j=function(t,n){var c=r.o(e,t)?e[t]:void 0;if(0!==c)if(c)n.push(c[2]);else{var o=new Promise((function(n,r){c=e[t]=[n,r]}));n.push(c[2]=o);var u=r.p+r.u(t),l=new Error;r.l(u,(function(n){if(r.o(e,t)&&(0!==(c=e[t])&&(e[t]=void 0),c)){var o=n&&("load"===n.type?"missing":n.type),u=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+u+")",l.name="ChunkLoadError",l.type=o,l.request=u,c[1](l)}}),"chunk-"+t,t)}};var t=function(t,n){var c,o,u=n[0],l=n[1],i=n[2],a=0;for(c in l)r.o(l,c)&&(r.m[c]=l[c]);for(i&&i(r),t&&t(n);a<u.length;a++)o=u[a],r.o(e,o)&&e[o]&&e[o][0](),e[u[a]]=0},n=self.webpackChunktip_calculator_app_main=self.webpackChunktip_calculator_app_main||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();class o{calculate(e){const t=this.getBill(),n=e,c=this.getPeople(),r=this.calcTip(t,n,c),o=this.calcTotal(t,n,c);this.displayTip(r),this.displayTotal(o)}getTotal(){const e=this.getBill(),t=this.getPct(),n=this.getPeople(),c=this.calcTotal(e,t,n);this.displayTotal(c)}getBill(){const e=document.querySelector(".calc-input__input-bill").value;return NaN==e||"undefined"==people?0:e}getPct(){const e=document.querySelectorAll(".calc-input__selection"),[t]=Array.from(e).filter((e=>!0===e.checked));if(t)return t.getAttribute("value");if(!t){const e=document.querySelector(".calc-input__tip-percentage").lastElementChild.lastElementChild.value;return""!==e?e:0}}getPeople(){const e=document.querySelector(".calc-input__input-people").value;return""===e?0:e}customButton(){document.querySelectorAll(".calc-input__selection").forEach((e=>e.checked=!1))}calcTip(e,t,n){if(0===t||0===n)return 0;{const c=e*t/100/n;return Math.round(100*c)/100}}calcTotal(e,t,n){if(0===t&&n>0){const t=+e/+n;return Math.round(100*t)/100}if(0===n&&t>0)return 0;if(0===t&&0===n)return 0;{const c=e/n+ +this.calcTip(+e,+t,+n);return Math.round(100*c)/100}}convertToDisplay(e){return e.toFixed(Math.max(((e+"").split(".")[1]||"").length,2))}displayTip(e){const t=this.convertToDisplay(e);document.querySelector(".calc-output__tip-display").innerText=`$${t}`}displayTotal(e){const t=this.convertToDisplay(e);document.querySelector(".calc-output__total-display").innerText=`$${t}`}reset(){const e=document.querySelector(".calc-input__input-bill"),t=document.querySelector(".calc-input__textarea"),n=document.querySelector(".calc-input__input-people"),c=document.querySelectorAll(".calc-input__selection"),r=document.querySelector(".calc-output__total-display"),o=document.querySelector(".calc-output__tip-display");e.value="",c.forEach((e=>e.checked=!1)),t.value="",n.value="",o.innerText="$0.00",r.innerText="$0.00"}}r.e(3).then(r.bind(r,3)),document.addEventListener("DOMContentLoaded",(function(){const e=new o;document.querySelector(".calc-output__reset").addEventListener("click",e.reset),document.querySelector(".calc-input__input-bill").addEventListener("keyup",(()=>{e.calculate(e.getPct())})),document.querySelector(".calc-input__input-people").addEventListener("keyup",(()=>{e.calculate(e.getPct())}));const t=document.querySelectorAll(".calc-input__selection");Array.from(t).forEach((t=>t.addEventListener("click",(()=>{e.calculate(e.getPct())}))));const n=document.querySelector(".calc-input__textarea");n.addEventListener("keyup",(()=>{e.customButton();const t=n.value;e.calculate(t)}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxVQUFVOEMsRUFBVy9CLGFBRXBDLE1BQU1nQyxFQUFrQjNHLFNBQVMrRSxpQkFBaUIsMEJBQ2xERSxNQUFNQyxLQUFLeUIsR0FBaUJ0RixTQUFTK0QsR0FDakNBLEVBQU1xQixpQkFBaUIsU0FBUyxLQUM1QkMsRUFBVzlDLFVBQVU4QyxFQUFXL0IsZUFHeEMsTUFBTWlDLEVBQWlCNUcsU0FBUzRFLGNBQWMseUJBQzlDZ0MsRUFBZUgsaUJBQWlCLFNBQVMsS0FDckNDLEVBQVdsQixlQUNYLE1BQU14RCxFQUFRNEUsRUFBZTVFLE1BQzdCMEUsRUFBVzlDLFVBQVU1QixTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlwLWNhbGN1bGF0b3ItYXBwLW1haW4vd2VicGFjay9ydW50aW1lL2xvYWQgc2NyaXB0Iiwid2VicGFjazovL3RpcC1jYWxjdWxhdG9yLWFwcC1tYWluL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RpcC1jYWxjdWxhdG9yLWFwcC1tYWluL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3RpcC1jYWxjdWxhdG9yLWFwcC1tYWluL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90aXAtY2FsY3VsYXRvci1hcHAtbWFpbi93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL3RpcC1jYWxjdWxhdG9yLWFwcC1tYWluL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly90aXAtY2FsY3VsYXRvci1hcHAtbWFpbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RpcC1jYWxjdWxhdG9yLWFwcC1tYWluL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdGlwLWNhbGN1bGF0b3ItYXBwLW1haW4vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdGlwLWNhbGN1bGF0b3ItYXBwLW1haW4vd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdGlwLWNhbGN1bGF0b3ItYXBwLW1haW4vLi9zcmMvanMvY2FsYy5qcyIsIndlYnBhY2s6Ly90aXAtY2FsY3VsYXRvci1hcHAtbWFpbi8uL3NyYy9qcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaW5Qcm9ncmVzcyA9IHt9O1xudmFyIGRhdGFXZWJwYWNrUHJlZml4ID0gXCJ0aXAtY2FsY3VsYXRvci1hcHAtbWFpbjpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gZnVuY3Rpb24odXJsLCBkb25lLCBrZXksIGNodW5rSWQpIHtcblx0aWYoaW5Qcm9ncmVzc1t1cmxdKSB7IGluUHJvZ3Jlc3NbdXJsXS5wdXNoKGRvbmUpOyByZXR1cm47IH1cblx0dmFyIHNjcmlwdCwgbmVlZEF0dGFjaDtcblx0aWYoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcyA9IHNjcmlwdHNbaV07XG5cdFx0XHRpZihzLmdldEF0dHJpYnV0ZShcInNyY1wiKSA9PSB1cmwgfHwgcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIikgPT0gZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpIHsgc2NyaXB0ID0gczsgYnJlYWs7IH1cblx0XHR9XG5cdH1cblx0aWYoIXNjcmlwdCkge1xuXHRcdG5lZWRBdHRhY2ggPSB0cnVlO1xuXHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG5cdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuXHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuXHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG5cdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG5cdFx0fVxuXHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIiwgZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpO1xuXHRcdHNjcmlwdC5zcmMgPSB1cmw7XG5cdH1cblx0aW5Qcm9ncmVzc1t1cmxdID0gW2RvbmVdO1xuXHR2YXIgb25TY3JpcHRDb21wbGV0ZSA9IGZ1bmN0aW9uKHByZXYsIGV2ZW50KSB7XG5cdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuXHRcdHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdHZhciBkb25lRm5zID0gaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdGRlbGV0ZSBpblByb2dyZXNzW3VybF07XG5cdFx0c2NyaXB0LnBhcmVudE5vZGUgJiYgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0XHRkb25lRm5zICYmIGRvbmVGbnMuZm9yRWFjaChmdW5jdGlvbihmbikgeyByZXR1cm4gZm4oZXZlbnQpOyB9KTtcblx0XHRpZihwcmV2KSByZXR1cm4gcHJldihldmVudCk7XG5cdH1cblx0O1xuXHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQob25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHVuZGVmaW5lZCwgeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pLCAxMjAwMDApO1xuXHRzY3JpcHQub25lcnJvciA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25lcnJvcik7XG5cdHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9ubG9hZCk7XG5cdG5lZWRBdHRhY2ggJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbihjaHVua0lkKSB7XG5cdHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmYpLnJlZHVjZShmdW5jdGlvbihwcm9taXNlcywga2V5KSB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSBmdW5jdGlvbihjaHVua0lkKSB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJcIiArIGNodW5rSWQgKyBcIi5idW5kbGUuanNcIjtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cbl9fd2VicGFja19yZXF1aXJlX18uZi5qID0gZnVuY3Rpb24oY2h1bmtJZCwgcHJvbWlzZXMpIHtcblx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpID8gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdIDogdW5kZWZpbmVkO1xuXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cblx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcblx0XHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgeyBpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTsgfSk7XG5cdFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuXHRcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcblx0XHRcdFx0XHR2YXIgdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpO1xuXHRcdFx0XHRcdC8vIGNyZWF0ZSBlcnJvciBiZWZvcmUgc3RhY2sgdW53b3VuZCB0byBnZXQgdXNlZnVsIHN0YWNrdHJhY2UgbGF0ZXJcblx0XHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoKTtcblx0XHRcdFx0XHR2YXIgbG9hZGluZ0VuZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpKSB7XG5cdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJlYWxTcmMgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnNyYztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnR5cGUgPSBlcnJvclR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG5cdFx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhWzFdKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5sKHVybCwgbG9hZGluZ0VuZGVkLCBcImNodW5rLVwiICsgY2h1bmtJZCwgY2h1bmtJZCk7XG5cdFx0XHRcdH0gZWxzZSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHRcdFx0fVxuXHRcdH1cbn07XG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSBmdW5jdGlvbihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkge1xuXHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuXHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuXHR2YXIgcnVudGltZSA9IGRhdGFbMl07XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0fVxuXHR9XG5cdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkc1tpXV0gPSAwO1xuXHR9XG5cbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt0aXBfY2FsY3VsYXRvcl9hcHBfbWFpblwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt0aXBfY2FsY3VsYXRvcl9hcHBfbWFpblwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FsY3VsYXRvciB7XG4gICAgY2FsY3VsYXRlKGNhbGNQY3RGbikge1xuICAgICAgICBjb25zdCBiaWxsID0gdGhpcy5nZXRCaWxsKCk7XG4gICAgICAgIGNvbnN0IHBjdCA9IGNhbGNQY3RGbjtcbiAgICAgICAgY29uc3QgcGVvcGxlID0gdGhpcy5nZXRQZW9wbGUoKTtcbiAgICAgICAgY29uc3QgdGlwID0gdGhpcy5jYWxjVGlwKGJpbGwsIHBjdCwgcGVvcGxlKTtcbiAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmNhbGNUb3RhbChiaWxsLCBwY3QsIHBlb3BsZSk7XG4gICAgICAgIHRoaXMuZGlzcGxheVRpcCh0aXApO1xuICAgICAgICB0aGlzLmRpc3BsYXlUb3RhbCh0b3RhbCk7XG4gICAgfVxuXG4gICAgZ2V0VG90YWwoKSB7XG4gICAgICAgIGNvbnN0IGJpbGwgPSB0aGlzLmdldEJpbGwoKTtcbiAgICAgICAgY29uc3QgcGN0ID0gdGhpcy5nZXRQY3QoKTtcbiAgICAgICAgY29uc3QgcGVvcGxlID0gdGhpcy5nZXRQZW9wbGUoKTtcbiAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmNhbGNUb3RhbChiaWxsLCBwY3QsIHBlb3BsZSk7XG4gICAgICAgIHRoaXMuZGlzcGxheVRvdGFsKHRvdGFsKTtcbiAgICB9XG5cbiAgICBnZXRCaWxsKCkge1xuICAgICAgICBjb25zdCBiaWxsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGMtaW5wdXRfX2lucHV0LWJpbGxcIik7XG4gICAgICAgIGNvbnN0IGJpbGwgPSBiaWxsSW5wdXQudmFsdWU7XG4gICAgICAgIGlmIChiaWxsID09IE5hTiB8fCBwZW9wbGUgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYmlsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFBjdCgpIHtcbiAgICAgICAgY29uc3QgcmFkaW9JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhbGMtaW5wdXRfX3NlbGVjdGlvblwiKTtcbiAgICAgICAgY29uc3QgW2lucHV0Q2hlY2tlZF0gPSBBcnJheS5mcm9tKHJhZGlvSW5wdXRzKS5maWx0ZXIoXG4gICAgICAgICAgICAoaW5wdXQpID0+IGlucHV0LmNoZWNrZWQgPT09IHRydWVcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGlucHV0Q2hlY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgcGN0ID0gaW5wdXRDaGVja2VkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHBjdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlucHV0Q2hlY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIFwiLmNhbGMtaW5wdXRfX3RpcC1wZXJjZW50YWdlXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b20gPSBmaWVsZHNldC5sYXN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gICAgICAgICAgICBpZiAoY3VzdG9tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFBlb3BsZSgpIHtcbiAgICAgICAgY29uc3QgcGVvcGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGMtaW5wdXRfX2lucHV0LXBlb3BsZVwiKTtcbiAgICAgICAgY29uc3QgcGVvcGxlID0gcGVvcGxlSW5wdXQudmFsdWU7XG4gICAgICAgIGlmIChwZW9wbGUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBlb3BsZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGN1c3RvbUJ1dHRvbigpIHtcbiAgICAgICAgY29uc3QgcmFkaW9JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhbGMtaW5wdXRfX3NlbGVjdGlvblwiKTtcbiAgICAgICAgcmFkaW9JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IChpbnB1dC5jaGVja2VkID0gZmFsc2UpKTtcbiAgICB9XG5cbiAgICBjYWxjVGlwKGJpbGwsIHBjdCwgcGVvcGxlKSB7XG4gICAgICAgIGlmIChwY3QgPT09IDAgfHwgcGVvcGxlID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRpcCA9IChiaWxsICogcGN0KSAvIDEwMCAvIHBlb3BsZTtcbiAgICAgICAgICAgIGNvbnN0IHRpcFJvdW5kID0gTWF0aC5yb3VuZCh0aXAgKiAxMDApIC8gMTAwO1xuICAgICAgICAgICAgcmV0dXJuIHRpcFJvdW5kO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2FsY1RvdGFsKGJpbGwsIHBjdCwgcGVvcGxlKSB7XG4gICAgICAgIGlmIChwY3QgPT09IDAgJiYgcGVvcGxlID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdG90YWwgPSArYmlsbCAvICtwZW9wbGU7XG4gICAgICAgICAgICBjb25zdCB0b3RhbFJvdW5kID0gTWF0aC5yb3VuZCh0b3RhbCAqIDEwMCkgLyAxMDA7XG4gICAgICAgICAgICByZXR1cm4gdG90YWxSb3VuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGVvcGxlID09PSAwICYmIHBjdCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwY3QgPT09IDAgJiYgcGVvcGxlID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCB0b3RhbCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0aXAgPSB0aGlzLmNhbGNUaXAoK2JpbGwsICtwY3QsICtwZW9wbGUpO1xuICAgICAgICAgICAgY29uc3QgdG90YWwgPSBiaWxsIC8gcGVvcGxlICsgK3RpcDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsUm91bmQgPSBNYXRoLnJvdW5kKHRvdGFsICogMTAwKSAvIDEwMDtcbiAgICAgICAgICAgIHJldHVybiB0b3RhbFJvdW5kO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29udmVydFRvRGlzcGxheShudW0pIHtcbiAgICAgICAgY29uc3QgbmV3TnVtID0gbnVtLnRvRml4ZWQoXG4gICAgICAgICAgICBNYXRoLm1heCgoKG51bSArIFwiXCIpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGgsIDIpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBuZXdOdW07XG4gICAgfVxuXG4gICAgZGlzcGxheVRpcCh0aXApIHtcbiAgICAgICAgY29uc3QgdGlwRGlzcGxheSA9IHRoaXMuY29udmVydFRvRGlzcGxheSh0aXApO1xuICAgICAgICBjb25zdCB0aXBBbW91bnREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwiLmNhbGMtb3V0cHV0X190aXAtZGlzcGxheVwiXG4gICAgICAgICk7XG4gICAgICAgIHRpcEFtb3VudERpc3BsYXkuaW5uZXJUZXh0ID0gYCQke3RpcERpc3BsYXl9YDtcbiAgICB9XG5cbiAgICBkaXNwbGF5VG90YWwodG90YWwpIHtcbiAgICAgICAgY29uc3QgdG90YWxEaXNwbGF5ID0gdGhpcy5jb252ZXJ0VG9EaXNwbGF5KHRvdGFsKTtcbiAgICAgICAgY29uc3QgdG90YWxBbW91bnREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwiLmNhbGMtb3V0cHV0X190b3RhbC1kaXNwbGF5XCJcbiAgICAgICAgKTtcbiAgICAgICAgdG90YWxBbW91bnREaXNwbGF5LmlubmVyVGV4dCA9IGAkJHt0b3RhbERpc3BsYXl9YDtcbiAgICB9XG5cbiAgICByZXNldCgpIHtcbiAgICAgICAgY29uc3QgYmlsbElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYWxjLWlucHV0X19pbnB1dC1iaWxsXCIpO1xuICAgICAgICBjb25zdCByYWRpb0N1c3RvbUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwiLmNhbGMtaW5wdXRfX3RleHRhcmVhXCJcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcGVvcGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGMtaW5wdXRfX2lucHV0LXBlb3BsZVwiKTtcbiAgICAgICAgY29uc3QgcmFkaW9JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhbGMtaW5wdXRfX3NlbGVjdGlvblwiKTtcbiAgICAgICAgY29uc3QgdG90YWxBbW91bnREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwiLmNhbGMtb3V0cHV0X190b3RhbC1kaXNwbGF5XCJcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdGlwQW1vdW50RGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBcIi5jYWxjLW91dHB1dF9fdGlwLWRpc3BsYXlcIlxuICAgICAgICApO1xuICAgICAgICBiaWxsSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICByYWRpb0lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0LmNoZWNrZWQgPSBmYWxzZSkpO1xuICAgICAgICByYWRpb0N1c3RvbUlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgcGVvcGxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aXBBbW91bnREaXNwbGF5LmlubmVyVGV4dCA9IFwiJDAuMDBcIjtcbiAgICAgICAgdG90YWxBbW91bnREaXNwbGF5LmlubmVyVGV4dCA9IFwiJDAuMDBcIjtcbiAgICB9XG59XG4iLCJpbXBvcnQoXCIuLy4uL3Nhc3MvbWFpbi5zY3NzXCIpO1xuXG5pbXBvcnQgQ2FsY3VsYXRvciBmcm9tIFwiLi9jYWxjLmpzXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGluaXQpO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnN0IGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpO1xuICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYWxjLW91dHB1dF9fcmVzZXRcIik7XG4gICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNhbGN1bGF0b3IucmVzZXQpO1xuICAgIGNvbnN0IGJpbGxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGMtaW5wdXRfX2lucHV0LWJpbGxcIik7XG4gICAgYmlsbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKCkgPT4ge1xuICAgICAgICBjYWxjdWxhdG9yLmNhbGN1bGF0ZShjYWxjdWxhdG9yLmdldFBjdCgpKTtcbiAgICB9KTtcbiAgICBjb25zdCBwZW9wbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGMtaW5wdXRfX2lucHV0LXBlb3BsZVwiKTtcbiAgICBwZW9wbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHtcbiAgICAgICAgY2FsY3VsYXRvci5jYWxjdWxhdGUoY2FsY3VsYXRvci5nZXRQY3QoKSk7XG4gICAgfSk7XG4gICAgY29uc3QgcmFkaW9JbnB1dHNCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYWxjLWlucHV0X19zZWxlY3Rpb25cIik7XG4gICAgQXJyYXkuZnJvbShyYWRpb0lucHV0c0J0bnMpLmZvckVhY2goKGlucHV0KSA9PlxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2FsY3VsYXRvci5jYWxjdWxhdGUoY2FsY3VsYXRvci5nZXRQY3QoKSk7XG4gICAgICAgIH0pXG4gICAgKTtcbiAgICBjb25zdCBjdXN0b21JbnB1dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FsYy1pbnB1dF9fdGV4dGFyZWFcIik7XG4gICAgY3VzdG9tSW5wdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHtcbiAgICAgICAgY2FsY3VsYXRvci5jdXN0b21CdXR0b24oKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjdXN0b21JbnB1dEJ0bi52YWx1ZTtcbiAgICAgICAgY2FsY3VsYXRvci5jYWxjdWxhdGUodmFsdWUpO1xuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbImluUHJvZ3Jlc3MiLCJkYXRhV2VicGFja1ByZWZpeCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZiIsImUiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsImtleXMiLCJyZWR1Y2UiLCJwcm9taXNlcyIsInUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibCIsInVybCIsImRvbmUiLCJwdXNoIiwic2NyaXB0IiwibmVlZEF0dGFjaCIsInNjcmlwdHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaSIsImxlbmd0aCIsInMiLCJnZXRBdHRyaWJ1dGUiLCJjcmVhdGVFbGVtZW50IiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsIm9uU2NyaXB0Q29tcGxldGUiLCJwcmV2IiwiZXZlbnQiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiZG9uZUZucyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImZvckVhY2giLCJmbiIsInNldFRpbWVvdXQiLCJiaW5kIiwidHlwZSIsInRhcmdldCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwicCIsImIiLCJiYXNlVVJJIiwic2VsZiIsImxvY2F0aW9uIiwiaHJlZiIsImluc3RhbGxlZENodW5rcyIsImoiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVycm9yIiwiRXJyb3IiLCJlcnJvclR5cGUiLCJyZWFsU3JjIiwibWVzc2FnZSIsIm5hbWUiLCJyZXF1ZXN0Iiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsIkNhbGN1bGF0b3IiLCJjYWxjdWxhdGUiLCJjYWxjUGN0Rm4iLCJiaWxsIiwidGhpcyIsImdldEJpbGwiLCJwY3QiLCJwZW9wbGUiLCJnZXRQZW9wbGUiLCJ0aXAiLCJjYWxjVGlwIiwidG90YWwiLCJjYWxjVG90YWwiLCJkaXNwbGF5VGlwIiwiZGlzcGxheVRvdGFsIiwiZ2V0VG90YWwiLCJnZXRQY3QiLCJxdWVyeVNlbGVjdG9yIiwiTmFOIiwicmFkaW9JbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDaGVja2VkIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwiaW5wdXQiLCJjaGVja2VkIiwiY3VzdG9tIiwibGFzdEVsZW1lbnRDaGlsZCIsImN1c3RvbUJ1dHRvbiIsIk1hdGgiLCJyb3VuZCIsImNvbnZlcnRUb0Rpc3BsYXkiLCJudW0iLCJ0b0ZpeGVkIiwibWF4Iiwic3BsaXQiLCJ0aXBEaXNwbGF5IiwiaW5uZXJUZXh0IiwidG90YWxEaXNwbGF5IiwicmVzZXQiLCJiaWxsSW5wdXQiLCJyYWRpb0N1c3RvbUlucHV0IiwicGVvcGxlSW5wdXQiLCJ0b3RhbEFtb3VudERpc3BsYXkiLCJ0aXBBbW91bnREaXNwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhbGN1bGF0b3IiLCJyYWRpb0lucHV0c0J0bnMiLCJjdXN0b21JbnB1dEJ0biJdLCJzb3VyY2VSb290IjoiIn0=